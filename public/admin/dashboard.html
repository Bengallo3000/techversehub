<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Dashboard – TechVerseHub</title>
<link rel="stylesheet" href="/css/theme.css"></head><body>
<header><span class="logo">Dashboard</span><form method="post" action="/admin/logout" style="display:inline"><button class="btn">Logout</button></form></header>
<main>
<h2>Products</h2>
<table id="tbl" class="table"></table>
<h3>Add / Edit</h3>
<form id="form" class="card">
  <input name="id" placeholder="ID" required>
  <input name="name" placeholder="Name" required>
  <input name="price" type="number" step="0.01" placeholder="Price €" required>
  <input name="img" placeholder="Image URL /uploads/xx.jpg" required>
  <input name="desc" placeholder="Description" required>
  <button class="btn">Save</button>
</form>
</main>
<script>
(async()=>{
  const tbl=document.getElementById('tbl');
  const form=document.getElementById('form');
  async function load(){
    const list=await fetch('/admin/api/products').then(r=>r.json());
    tbl.innerHTML='<tr><th>ID</th><th>Name</th><th>Price</th><th>Img</th><th>Desc</th></tr>';
    list.forEach(p=>tbl.insertRow().innerHTML=`
      <td>${p.id}</td><td>${p.name}</td><td>${p.price} €</td>
      <td><img src="${p.img}" width="60"></td><td>${p.desc}</td>`);
  }
  form.addEventListener('submit',async e=>{
    e.preventDefault();
    const data=Object.fromEntries(new FormData(form));
    await fetch('/admin/api/products',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
    form.reset(); load();
  });
  load();
})();
</script>
</body></html>
